{% load static %}
{% load sweetify %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/crearrequisicion.css' %}">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" type="image/x-icon" href="{% static 'img/logo.ico' %}">
	<title>Crear ofertas</title>
</head>

<body class="hidden">
    <div class="centrado" id="onload">
        <div class="cssload-loader">HUMAN TALENT</div>
    </div>

<div class="capa"></div>

<nav>
    <div class="barra">
        <div class="content">
            <a href="{%url 'index'%}">
            <p class="p1">HUMAN TALENT <br> Crear Oferta</p>
            </a>
        </div>
    </div>
</nav>

<main>
    <div class="info">
        <form action="{% url 'save_info_requi' %}" method="post">
            {% csrf_token %}
            <p class="titulo1">Datos de la oferta</p>

            <p class="titulod">Fechas de la oferta</p>

            <label for="finicio" class="infop" style="margin-left: 140px" >Fecha de inicio</label>
            {{form_requi.fecha_inicio}}


            <label for="apellido" class="infop" id="ape" style="margin-left: 150px">Fecha final</label>
            {{form_requi.fecha_finalizacion}}

            <p class="titulod">Datos de la Empresa</p>

            <label for="direccion" class="infop" style="margin-left: 100px;">Nombre</label>
            <input type="text" class="inp2" value="{{form_name.name.value}}" disabled>

            <label for="cel" class="infop">Dirección</label>
            {{form_requi.direccion}}

            <label for="email" class="infop">Nit</label>
            <input type="number" class="inp3" value="{{form_company.nit.value}}" disabled>

            <br>
            <br>
            <label for="fechan" class="infop" id="fecha" style="margin-left:50px;">Departamento</label>
            {{form_requi.departamento}}

            <label for="fechan" class="infop" id="fecha" >Ciudad</label>
            {{form_requi.ciudad}}

            <label for="tpod" class="infop">Codigo CNO</label>
            {{form_requi.codigo_cno}}

            <br>
            <br>
            <label for="ncc" class="infop" id="doc" style="margin-left: 39%;">Teléfono</label>
            {{form_requi.telefono}}

            <p class="titulod">Datos de la oferta</p>

            <label for="genero" class="infop" style="margin-left: 140px;">Nombre del cargo</label>
            {{form_requi.nombre_cargo}}

            <label for="edad" class="infop" id="ed" style="margin-left: 120px;">Educación</label>
            {{form_requi.educacion}}

            <br>
            <br>

            <label for="civil" class="infop" id="estado" style="margin-left:80px ;">Tipo de contrato</label>
            {{form_requi.tipo_contrato}}

            <label for="civil" class="infop" id="estado">Experiencia</label>
            {{form_requi.experiencia_laboral}}

            <label for="civil" class="infop" id="estado">Profesión</label>
            {{form_requi.profesion}}

            <br>
            <br>
            <label for="civil" class="infop" id="estado" style="margin-left:  80px;">Tipo de salario</label>
            {{form_requi.forma_pago}}

            <label for="civil" class="infop" id="estado">Salario</label>
            {{form_requi.salario}}

            <label for="civil" class="infop" id="estado">Jornada laboral</label>
            {{form_requi.jornada_laboral}}

            <p class="titulod2">Descripción</p>
            {{form_requi.descripcion}}

            <label for="civil" class="infop" id="estado" style="margin-left:80px ;">Causa Requisición</label>
            {{form_requi.causa_requi}}

            <br>
            <br>
            <div id="hab">
            <p class="titulo1">Habilidades</p>
            <p class="titulo2">Mis habilidades</p>

            <label for="emp" class="infop" style="margin-left:40% ;">Yo tengo la hablidad de:</label>
            <br>
            <br>
            {% for form in form_habi %}
            {{form.habilidades_requi}}
            {% endfor %}
            <br>
            <br>
            <br>
            </div>

            <p class="titulo2">No olvides guardar tu nueva oferta</p>
            <button class="titulo1" id="#" style="margin: 2%  0 0 38%;cursor: pointer; background-color: #1D405C; border: 3px solid #fff; border-radius: 20px; padding: 5px;">Guardar</button>
            <button class="titulo1" id="open" style="margin: 2%  0 0 5%;cursor: pointer; background-color: #1D405C; border: 3px solid #fff; border-radius: 20px; padding: 5px;" onclick="window.location.href = '{% url 'consultar_ofer' request.COOKIES.User_id %}'">Cancelar</button>
            <a href="#" class="titulo1" id="agregar2" style="margin:20px ;  border: 3px solid #fff; border-radius:20px; padding:5px ; ">Agregar</a>
        </form>
        <script src="/static/js/loader.js"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

        <script>
            const contenedor2 = document.querySelector('#hab');
            const btnAgregar2 = document.querySelector('#agregar2');
            // Counter variable
            let totalForms = 1;
            // Function to add new form
            btnAgregar2.addEventListener('click', (event) => {
            event.preventDefault();
            const newForm = document.createElement('div');
            newForm.id = `form-${totalForms}`;
            newForm.innerHTML = `
            <label for="emp" class="infop" style="margin-left:40% ;">yo tengo la hablidad de:</label>
            <br>
            <br>
            {{in_habi.habilidades_requi}}
            </div>
            <div>
            <br>
            <br>
            <br>
            <button onclick="eliminar2(this)" style="
                background-color: red;
                border-color: black;
                border-radius: 15px;
                font-size: 16px;
                font-weight: bold;
                color: white;
                padding: 10px;
                cursor: pointer;
                ">Eliminar</button>
            `;
            contenedor2.appendChild(newForm);
            totalForms++;
            });
            // Function to remove form
            function eliminar2(element) {
            const parentNode = element.closest('div[id^="form-"]');
            contenedor2.removeChild(parentNode);
            actualizarContador();
            };
            // Function to update counter
            function actualizarContador() {
            const forms = contenedor2.querySelectorAll('div[id^="form-"]');
            for (let i = 0; i < forms.length; i++) {
                forms[i].children[0].children[1].innerHTML = i + 1;
            }
            };
            </script>
    </main>
</body>
